// Liste des copains avec leurs noms
const copains = {
    "1": "Angle",
    "2": "Chim",
    "3": "Zonzon",
    "4": "Luc",
    "5": "Mori"
};

// Récupérer les informations sur le personnage
const characterId = getUrlParameter('character');
const image = getUrlParameter('image');

// Sélection de l'élément où afficher le personnage
const displayElement = document.getElementById('character-display');

if (characterId && image) {
    // Obtenir le nom du copain en fonction de l'ID
    const characterName = copains[characterId] || "Copain inconnu"; // S'il n'y a pas d'ID valide

    // Si c'est Zonzon, on utilise l'URL spécifique
    const characterImage = (characterName === 'Zonzon') ? 'https://raw.githubusercontent.com/Anngeldouche/StardewP2/main/Copainbits/Copains8B(3).png' : image;

    // Afficher le personnage sélectionné
    displayElement.innerHTML = `
        <img src="${characterImage}" alt="Personnage sélectionné" id="character-image" />
        <h2>Bienvenue ${characterName}</h2> <!-- Affichage personnalisé -->
    `;

    // Récupérer l'image et la rendre déplaçable
    const characterImageElement = document.getElementById('character-image');
    let offsetX, offsetY;

    // Fonction pour démarrer le déplacement
    characterImageElement.addEventListener('mousedown', (event) => {
        offsetX = event.clientX - characterImageElement.getBoundingClientRect().left;
        offsetY = event.clientY - characterImageElement.getBoundingClientRect().top;

        // Ajoute un écouteur pour déplacer l'image
        const onMouseMove = (event) => {
            characterImageElement.style.left = `${event.clientX - offsetX}px`;
            characterImageElement.style.top = `${event.clientY - offsetY}px`;
        };

        // Écouteur pour arrêter le mouvement de l'image
        const onMouseUp = () => {
            window.removeEventListener('mousemove', onMouseMove);
            window.removeEventListener('mouseup', onMouseUp);
        };

        // Ajoute l'écouteur de mouvement et d'arrêt
        window.addEventListener('mousemove', onMouseMove);
        window.addEventListener('mouseup', onMouseUp);
    });

} else {
    // Si aucun personnage n'est passé dans l'URL
    displayElement.innerHTML = `<p>Aucun personnage sélectionné. Veuillez revenir à la page précédente et en choisir un.</p>`;
}
